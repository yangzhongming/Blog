---
title: 大数据电商数据仓库
tags: [大数据]
categories: 大数据分析
images: 
date: 2019-08-12 21:00:00
---

#### 一、数据仓库概念

+ 数据仓库（Data Warehouse）

    为企业所有决策制定过程，提供有系统数据支撑的战略集合。通过对数据仓库中数据的分析，可以帮助企业改进业务流程、控制成本、提高产品质量。

    数据仓库，不是数据的最终目的地，而是为数据最终的目的地做好准备。包括对数据的：清洗，转义，分类，重组，合并，拆分，统计。

    数据仓库，数据来源包括：日志采集系统，业务系统数据库，爬虫系统等。通过数据仓库，最终形成报表系统，用户画像，推荐系统，机器学习，风控系统。

#### 二、需求分析及架构设计

+ 1.需求分析
  + 采集平台的搭建
  + 用户行为数据仓库分层的搭建
  + 业务数据仓库的分层搭建
  + 对数据仓库中的数据进行留存、转化率、GMV、复购率、活跃等报表分析
  
  
+ 2.项目架构
    + 2.1 技术选型
   		+ 数据采集传输：Flume,Kafka,Sqoop,Logstash,DataX
   		+ 数据存储：MySQL，HDFS，HBase,Redis,MongoDB
   		+ 数据计算：Hive，Tez,Spark,Flink,Stom
   		+ 数据查询：Presto,Druid,Impala,Kylin
    + 2.2 系统数据流程
	+ 2.3 框架版本选型
		+ Apache:运维麻烦，组件兼容性需要自己调研
	
		|产品|版本|
		| ------ | ------ |
		| 短文本 | 中等文本 |
		| 稍微长一点的文本 |版本|
	    | 稍微长一点的文本 |版本|
		| 稍微长一点的文本 |版本|
	    | 稍微长一点的文本 |版本|
	    | 稍微长一点的文本 |版本|
	    | 稍微长一点的文本 |版本|
	    | 稍微长一点的文本 |版本|
	    | 稍微长一点的文本 |版本|
		| 稍微长一点的文本 |版本|

		+ CDH:国内使用最多的版本，但CM不开源，对中小公司使用来说没有影响
		+ HDP:开源，可进行二次开发，没有CDH稳定，国内使用较少
		
	+ 2.4 服务器选型
	+ 2.5 集群资源规划设计
	
## 三、数据生成模块

## 四、数据采集模块
+  网页埋点

       通过js文件，应用服务器的所有页面都引入该js文件，在页面被访问时触发。触发的js收集用户行为数据信息，提交到日志服务器中。

+  2.JS代码的实现
	+  PV的计算
	
       > 浏览器对应用服务器的一次访问，会对应在日志服务器中产生一条日志。统计日志服务器当前日志数量即PV。

    + UV的计算
      >  在日志中标识出每条日志属于哪个用户的，之后对于这一天的所有日志中的用户，去重计算就可以得到UV。
      
      >  如何标识一个用户？
      
      >  在JS中，为每个用户指定独一无二的编号uvid来唯一标识，并将这个uvid表示存储在浏览器cookie,后续再有访问日志时，仍然采用cookie中保存的uvid,这样这个用户无论访问多少次，都有相同的uvid,标识这些访问来自于同一个用户。